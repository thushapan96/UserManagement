!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.retinajs=e()}(this,function(){"use strict";var t="undefined"!=typeof window,r=Math.round(t&&window.devicePixelRatio||1),n=/(\.[A-z]{3,4}\/?(\?.*)?)$/,o=/url\(('|")?([^)'"]+)('|")?\)/i,e="[data-rjs]",a="data-rjs-processed";function i(t){return Array.prototype.slice.call(t)}function d(e,i){var n=e.nodeName.toLowerCase(),t=document.createElement("img");t.addEventListener("load",function(){var t;"img"===n?((t=e).hasAttribute("data-no-resize")||(0===t.offsetWidth&&0===t.offsetHeight?(t.setAttribute("width",t.naturalWidth),t.setAttribute("height",t.naturalHeight)):(t.setAttribute("width",t.offsetWidth),t.setAttribute("height",t.offsetHeight))),t.setAttribute("src",i)):e.style.backgroundImage="url("+i+")"}),t.setAttribute("src",i),e.setAttribute(a,!0)}function u(t,e,i){i=2<arguments.length&&void 0!==i?i:1,i=parseInt(i,10),i=r<i?r:i;e&&1<i&&d(t,e.replace(n,"@"+i+"x$1"))}function s(t){((t=t)?"function"==typeof t.forEach?t:i(t):"undefined"!=typeof document?i(document.querySelectorAll(e)):[]).forEach(function(t){var e,i,n;t.getAttribute(a)||(e="img"===t.nodeName.toLowerCase()?t.getAttribute("src"):t.style.backgroundImage.replace(o,"$2"),n=t.getAttribute("data-rjs"),i=!isNaN(parseInt(n,10)),null!==n&&(i?u(t,e,n):(t=t,n=n,1<r&&d(t,n))))})}return t&&(window.addEventListener("load",function(){s()}),window.retinajs=s),s});