!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):r.accounting=e()}(this,function(){"use strict";var p="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var r,i=(function(r){function b(r,e,t,n){var i=r.c,o=r.e+e+1;if(o<i.length){if(1===t)n=5<=i[o];else if(2===t)n=5<i[o]||5==i[o]&&(n||o<0||i[o+1]!==E||1&i[o-1]);else if(3===t)n=n||i[o]!==E||o<0;else if(n=!1,0!==t)throw Error(a);if(o<1)i.length=1,n?(r.e=-e,i[0]=1):i[0]=r.e=0;else{if(i.length=o--,n)for(;9<++i[o];)i[o]=0,o--||(++r.e,i.unshift(1));for(o=i.length;!i[--o];)i.pop()}}else if(t<0||3<t||t!==~~t)throw Error(a);return r}function e(r,e,t,n){var i,o,s=r.constructor,c=!r.c[0];if(t!==E){if(t!==~~t||t<(3==e)||1e6<t)throw Error(3==e?f+"precision":y);for(t=n-(r=new s(r)).e,r.c.length>++n&&b(r,t,s.RM),2==e&&(n=r.e+t+1);r.c.length<n;)r.c.push(0)}if(i=r.e,t=(o=r.c.join("")).length,2!=e&&(1==e||3==e&&n<=i||i<=s.NE||i>=s.PE))o=o.charAt(0)+(1<t?"."+o.slice(1):"")+(i<0?"e":"e+")+i;else if(i<0){for(;++i;)o="0"+o;o="0."+o}else if(0<i)if(++i>t)for(i-=t;i--;)o+="0";else i<t&&(o=o.slice(0,i)+"."+o.slice(i));else 1<t&&(o=o.charAt(0)+"."+o.slice(1));return r.s<0&&(!c||4==e)?"-"+o:o}var t,n,i,o,s,c,u,f,y,a,x,l,E,h;t=p,i=20,o=1,s=-7,c=21,y=(f=(u="[big.js] ")+"Invalid ")+"decimal places",a=f+"rounding mode",x=u+"Division by zero",E=void 0,h=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,(l={}).abs=function(){var r=new this.constructor(this);return r.s=1,r},l.cmp=function(r){var e,t=this.c,n=(r=new this.constructor(r)).c,i=this.s,o=r.s,s=this.e,r=r.e;if(!t[0]||!n[0])return t[0]?i:n[0]?-o:0;if(i!=o)return i;if(e=i<0,s!=r)return r<s^e?1:-1;for(o=(s=t.length)<(r=n.length)?s:r,i=-1;++i<o;)if(t[i]!=n[i])return t[i]>n[i]^e?1:-1;return s==r?0:r<s^e?1:-1},l.div=function(r){var e=this.constructor,t=this.c,n=(r=new e(r)).c,i=this.s==r.s?1:-1,o=e.DP;if(o!==~~o||o<0||1e6<o)throw Error(y);if(!n[0])throw Error(x);if(!t[0])return new e(0*i);var s,c,u,f,a,l=n.slice(),h=s=n.length,p=t.length,g=t.slice(0,s),m=g.length,d=r,v=d.c=[],w=0,r=o+(d.e=this.e-r.e)+1;for(d.s=i,i=r<0?0:r,l.unshift(0);m++<s;)g.push(0);do{for(u=0;u<10;u++){if(s!=(m=g.length))f=m<s?1:-1;else for(a=-1,f=0;++a<s;)if(n[a]!=g[a]){f=n[a]>g[a]?1:-1;break}if(!(f<0))break;for(c=m==s?n:l;m;){if(g[--m]<c[m]){for(a=m;a&&!g[--a];)g[a]=9;--g[a],g[m]+=10}g[m]-=c[m]}for(;!g[0];)g.shift()}}while(v[w++]=f?u:++u,g[0]&&f?g[m]=t[h]||0:g=[t[h]],(h++<p||g[0]!==E)&&i--);return v[0]||1==w||(v.shift(),d.e--),r<w&&b(d,o,e.RM,g[0]!==E),d},l.eq=function(r){return!this.cmp(r)},l.gt=function(r){return 0<this.cmp(r)},l.gte=function(r){return-1<this.cmp(r)},l.lt=function(r){return this.cmp(r)<0},l.lte=function(r){return this.cmp(r)<1},l.minus=l.sub=function(r){var e,t,n,i,o=this,s=o.constructor,c=o.s,u=(r=new s(r)).s;if(c!=u)return r.s=-u,o.plus(r);var f=o.c.slice(),a=o.e,l=r.c,h=r.e;if(!f[0]||!l[0])return l[0]?(r.s=-u,r):new s(f[0]?o:0);if(c=a-h){for((n=(i=c<0)?(c=-c,f):(h=a,l)).reverse(),u=c;u--;)n.push(0);n.reverse()}else for(t=((i=f.length<l.length)?f:l).length,c=u=0;u<t;u++)if(f[u]!=l[u]){i=f[u]<l[u];break}if(i&&(n=f,f=l,l=n,r.s=-r.s),0<(u=(t=l.length)-(e=f.length)))for(;u--;)f[e++]=0;for(u=e;c<t;){if(f[--t]<l[t]){for(e=t;e&&!f[--e];)f[e]=9;--f[e],f[t]+=10}f[t]-=l[t]}for(;0===f[--u];)f.pop();for(;0===f[0];)f.shift(),--h;return f[0]||(r.s=1,f=[h=0]),r.c=f,r.e=h,r},l.mod=function(r){var e,t=this,n=t.constructor,i=t.s,o=(r=new n(r)).s;if(!r.c[0])throw Error(x);return e=(t.s=r.s=1)==r.cmp(t),t.s=i,r.s=o,e?new n(t):(i=n.DP,o=n.RM,n.DP=n.RM=0,t=t.div(r),n.DP=i,n.RM=o,this.minus(t.times(r)))},l.plus=l.add=function(r){var e,t=this,n=t.constructor,i=t.s,o=(r=new n(r)).s;if(i!=o)return r.s=-o,t.minus(r);var s=t.e,c=t.c,u=r.e,f=r.c;if(!c[0]||!f[0])return f[0]?r:new n(c[0]?t:0*i);if(c=c.slice(),i=s-u){for((e=0<i?(u=s,f):(i=-i,c)).reverse();i--;)e.push(0);e.reverse()}for(c.length-f.length<0&&(e=f,f=c,c=e),i=f.length,o=0;i;c[i]%=10)o=(c[--i]=c[i]+f[i]+o)/10|0;for(o&&(c.unshift(o),++u),i=c.length;0===c[--i];)c.pop();return r.c=c,r.e=u,r},l.pow=function(r){var e=this,t=new e.constructor(1),n=t,i=r<0;if(r!==~~r||r<-1e6||1e6<r)throw Error(f+"exponent");for(i&&(r=-r);1&r&&(n=n.times(e)),r>>=1;)e=e.times(e);return i?t.div(n):n},l.round=function(r,e){var t=this.constructor;if(r===E)r=0;else if(r!==~~r||r<0||1e6<r)throw Error(y);return b(new t(this),r,e===E?t.RM:e)},l.sqrt=function(){var r,e,t,n=this,i=n.constructor,o=n.s,s=n.e,c=new i(.5);if(!n.c[0])return new i(n);if(o<0)throw Error(u+"No square root");for(o=Math.sqrt(n.toString()),0===o||o===1/0?((e=n.c.join("")).length+s&1||(e+="0"),(r=new i(Math.sqrt(e).toString())).e=((s+1)/2|0)-(s<0||1&s)):r=new i(o.toString()),s=r.e+(i.DP+=4);t=r,r=c.times(t.plus(n.div(t))),t.c.slice(0,s).join("")!==r.c.slice(0,s).join(""););return b(r,i.DP-=4,i.RM)},l.times=l.mul=function(r){var e,t=this.constructor,n=this.c,i=(r=new t(r)).c,o=n.length,s=i.length,c=this.e,u=r.e;if(r.s=this.s==r.s?1:-1,!n[0]||!i[0])return new t(0*r.s);for(r.e=c+u,o<s&&(e=n,n=i,i=e,u=o,o=s,s=u),e=new Array(u=o+s);u--;)e[u]=0;for(c=s;c--;){for(s=0,u=o+c;c<u;)s=e[u]+i[c]*n[u-c-1]+s,e[u--]=s%10,s=s/10|0;e[u]=(e[u]+s)%10}for(s?++r.e:e.shift(),c=e.length;!e[--c];)e.pop();return r.c=e,r},l.toExponential=function(r){return e(this,1,r,r)},l.toFixed=function(r){return e(this,2,r,this.e+r)},l.toPrecision=function(r){return e(this,3,r,r-1)},l.toString=function(){return e(this)},l.valueOf=l.toJSON=function(){return e(this,4)},(n=function t(){function n(r){var e=this;if(!(e instanceof n))return r===E?t():new n(r);r instanceof n?(e.s=r.s,e.e=r.e,e.c=r.c.slice()):function(r,e){var t,n,i;if(0===e&&1/e<0)e="-0";else if(!h.test(e+=""))throw Error(f+"number");for(r.s="-"==e.charAt(0)?(e=e.slice(1),-1):1,-1<(t=e.indexOf("."))&&(e=e.replace(".","")),0<(n=e.search(/e/i))?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),i=e.length,n=0;n<i&&"0"==e.charAt(n);)++n;if(n==i)r.c=[r.e=0];else{for(;0<i&&"0"==e.charAt(--i););for(r.e=t-n-1,r.c=[],t=0;n<=i;)r.c[t++]=+e.charAt(n++)}}(e,r),e.constructor=n}return n.prototype=l,n.DP=i,n.RM=o,n.NE=s,n.PE=c,n.version="5.0.2",n}()).default=n.Big=n,r.exports?r.exports=n:t.Big=n}(r={exports:{}}),r.exports),a={version:"0.4.2",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},s=Array.prototype.map,e=Array.isArray,t=Object.prototype.toString;function l(r){return""===r||r&&r.charCodeAt&&r.substr}function h(r){return e?e(r):"[object Array]"===t.call(r)}function g(r){return r&&"[object Object]"===t.call(r)}function m(r,e){for(var t in r=r||{},e=e||{})e.hasOwnProperty(t)&&null==r[t]&&(r[t]=e[t]);return r}function d(r,e,t){var n,i,o=[];if(!r)return o;if(s&&r.map===s)return r.map(e,t);for(n=0,i=r.length;n<i;n++)o[n]=e.call(t,r[n],n,r);return o}function v(r,e){return r=Math.round(Math.abs(r)),isNaN(r)?e:r}function w(r){var e=a.settings.currency.format;return l(r="function"==typeof r?r():r)&&r.match("%v")?{pos:r,neg:r.replace("-","").replace("%v","-%v"),zero:r}:r&&r.pos&&r.pos.match("%v")?r:l(e)?a.settings.currency.format={pos:e,neg:e.replace("%v","-%v"),zero:e}:e}function b(r,e){if(h(r))return d(r,function(r){return b(r,e)});r=r||0;try{return new i(r)}catch(r){}e=e||a.settings.number.decimal;var t=new RegExp("[^0-9-"+e+"]",["g"]),n=(""+r).replace(/\((?=\d+)(.*)\)/,"-$1").replace(t,"").replace(e,".");try{return new i(n)}catch(r){return new i(0)}}function n(r,e){return h(r)?d(r,function(r){return Number(b(r,e))}):Number(b(r,e))}function y(r,e,t,n){if(h(r))return d(r,function(r){return y(r,e,t,n)});r=b(r);var i=m(g(e)?e:{precision:e,thousand:t,decimal:n},a.settings.number),o=v(i.precision),s=r.lt(0)?"-":"",r=r.abs().toFixed(o).split("."),s=s;return s+=r[0].replace(/\B(?=(\d{3})+(?!\d))/g,i.thousand),o&&(s+=i.decimal+r[1]),s}return a.unformatBig=b,a.parseBig=b,a.unformat=n,a.parse=n,a.toFixed=function(r,e){return e=v(e,a.settings.number.precision),b(r).toFixed(e)},a.formatNumber=y,a.format=y,a.formatMoney=function e(r,t,n,i,o,s){if(h(r))return d(r,function(r){return e(r,t,n,i,o,s)});r=b(r);var c=m(g(t)?t:{symbol:t,precision:n,thousand:i,decimal:o,format:s},a.settings.currency),u=w(c.format);return(r.gt(0)?u.pos:r.lt(0)?u.neg:u.zero).replace("%s",c.symbol).replace("%v",y(r.abs(),v(c.precision),c.thousand,c.decimal))},a.formatColumn=function(r,e,t,n,i,o){if(!r||!h(r))return[];var s=m(g(e)?e:{symbol:e,precision:t,thousand:n,decimal:i,format:o},a.settings.currency),c=w(s.format),u=c.pos.indexOf("%s")<c.pos.indexOf("%v"),f=0,r=d(r,function(r){if(h(r))return a.formatColumn(r,s);r=((r=b(r)).gt(0)?c.pos:r.lt(0)?c.neg:c.zero).replace("%s",s.symbol).replace("%v",y(r.abs(),v(s.precision),s.thousand,s.decimal));return r.length>f&&(f=r.length),r});return d(r,function(r){return l(r)&&r.length<f?u?r.replace(s.symbol,s.symbol+new Array(f-r.length+1).join(" ")):new Array(f-r.length+1).join(" ")+r:r})},a});