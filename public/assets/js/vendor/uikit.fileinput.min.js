!function(l){"use strict";function n(e,t){this.$element=l(e),this.$input=this.$element.find(":file"),0!==this.$input.length&&(this.name=this.$input.attr("name")||t.name,this.$hidden=this.$element.find('input[type=hidden][name="'+this.name+'"]'),0===this.$hidden.length&&(this.$hidden=l('<input type="hidden">').insertBefore(this.$input)),this.$preview=this.$element.find(".fileinput-preview"),t=this.$preview.css("height"),"inline"!==this.$preview.css("display")&&"0px"!==t&&"none"!==t&&this.$preview.css("line-height",t),this.original={exists:this.$element.hasClass("fileinput-exists"),preview:this.$preview.html(),hiddenVal:this.$hidden.val()},this.listen())}var i="Microsoft Internet Explorer"==window.navigator.appName;n.prototype.listen=function(){this.$input.on("change.uk.fileinput",l.proxy(this.change,this)),l(this.$input[0].form).on("reset.uk.fileinput",l.proxy(this.reset,this)),this.$element.find('[data-trigger="fileinput"]').on("click.uk.fileinput",l.proxy(this.trigger,this)),this.$element.find('[data-dismiss="fileinput"]').on("click.uk.fileinput",l.proxy(this.clear,this))},n.prototype.change=function(e){var i=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files;if(e.stopPropagation(),0===i.length)return this.clear(),void this.$element.trigger("clear.uk.fileinput");this.$hidden.val(""),this.$hidden.attr("name",""),this.$input.attr("name",this.name);var n,s,a=i[0];0<this.$preview.length&&(void 0!==a.type?a.type.match(/^image\/(gif|png|jpeg)$/):a.name.match(/\.(gif|png|jpe?g)$/i))&&"undefined"!=typeof FileReader?(e=new FileReader,n=this.$preview,s=this.$element,e.onload=function(e){var t=l("<img>");t[0].src=e.target.result,i[0].result=e.target.result,s.find(".fileinput-filename").text(a.name),"none"!=n.css("max-height")&&t.css("max-height",parseInt(n.css("max-height"),10)-parseInt(n.css("padding-top"),10)-parseInt(n.css("padding-bottom"),10)-parseInt(n.css("border-top"),10)-parseInt(n.css("border-bottom"),10)),n.html(t),s.addClass("fileinput-exists").removeClass("fileinput-new"),s.trigger("change.uk.fileinput",i)},e.readAsDataURL(a)):(this.$element.find(".fileinput-filename").text(a.name),this.$preview.text(a.name),this.$element.addClass("fileinput-exists").removeClass("fileinput-new"),this.$element.trigger("change.uk.fileinput"))},n.prototype.clear=function(e){var t;e&&e.preventDefault(),this.$hidden.val(""),this.$hidden.attr("name",this.name),this.$input.attr("name",""),i?(t=this.$input.clone(!0),this.$input.after(t),this.$input.remove(),this.$input=t):this.$input.val(""),this.$preview.html(""),this.$element.find(".fileinput-filename").text(""),this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),void 0!==e&&(this.$input.trigger("change"),this.$element.trigger("clear.uk.fileinput"))},n.prototype.reset=function(){this.clear(),this.$hidden.val(this.original.hiddenVal),this.$preview.html(this.original.preview),this.$element.find(".fileinput-filename").text(""),this.original.exists?this.$element.addClass("fileinput-exists").removeClass("fileinput-new"):this.$element.addClass("fileinput-new").removeClass("fileinput-exists"),this.$element.trigger("reset.uk.fileinput")},n.prototype.trigger=function(e){this.$input.trigger("click"),e.preventDefault()};var e=l.fn.fileinput;l.fn.fileinput=function(i){return this.each(function(){var e=l(this),t=e.data("uk.fileinput");t||e.data("uk.fileinput",t=new n(this,i)),"string"==typeof i&&t[i]()})},l.fn.fileinput.Constructor=n,l.fn.fileinput.noConflict=function(){return l.fn.fileinput=e,this},l(document).on("click.fileinput.data-api",'[data-provides="fileinput"]',function(e){var t=l(this);t.data("uk.fileinput")||(t.fileinput(t.data()),0<(t=l(e.target).closest('[data-dismiss="fileinput"],[data-trigger="fileinput"]')).length&&(e.preventDefault(),t.trigger("click.uk.fileinput")))})}(window.jQuery);