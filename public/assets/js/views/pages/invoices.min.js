var $invoiceList=$("#sc-js-invoices-list"),$invoice=$("#sc-js-invoice");scutum.pages.invoices={},scutum.pages.invoices.init=function(){scutum.pages.invoices.search(),scutum.pages.invoices.renderInvoice();var i=scutum.helpers.isRTL()?"uk-margin-small-left":"uk-margin-small-right";UIkit.notification('<span class="md-color-red-400 mdi mdi-alert-outline '+i+'"></span> There are 3 unpaid invoices',{pos:scutum.helpers.mq.mediumMin()?scutum.helpers.isRTL()?"bottom-right":"bottom-left":"top-center"}),scutum.pages.invoices.print()},scutum.pages.invoices.search=function(){scutum.require(["listjs"],function(){new List("sc-js-invoices-list",{searchClass:"sc-js-list-search",listClass:"uk-list",valueNames:["sc-js-list-number","sc-js-list-company"]})})},scutum.pages.invoices.renderInvoice=function(){scutum.require(["handlebars","accounting"],function(){"undefined"!=typeof HandlebarsIntl&&HandlebarsIntl.registerWith(Handlebars),scutum.handlebars.getPartial("invoice-items").then(function(i){Handlebars.registerPartial("invoice-items",i)}),scutum.helpers.ajax("data/pages/invoices.json","GET","json").then(function(e){$("#sc-js-invoices-list, #sc-offcanvas").find("ul").on("click",">li",function(i){i.preventDefault();i=$(this);i.addClass("uk-active").siblings("li").removeClass("uk-active"),scutum.helpers.mq.mediumMax()&&UIkit.offcanvas(scutum.$offcanvas).hide(),scutum.helpers.preloader.overlayShow(!1,"#sc-js-invoice"),$invoice.find(".uk-card-body").length&&($invoice.find(".uk-card-body.sc-js-el-show").velocity("transition.slideDownBigOut",{delay:120,duration:240}),$invoice.find(".uk-card-title.sc-js-el-show").velocity("transition.fadeOut",{duration:240}));i=i.attr("data-invoice-id");i&&scutum.helpers.findObjectByKey(e,"id",i).then(function(i){var e,s;i&&(e=i.items,s=0,e.forEach(function(i){s+=parseFloat(i.total)}),setTimeout(function(){scutum.helpers.preloader.overlayHide()},700),setTimeout(function(){$invoice.one("render.handlebars",function(){$invoice.find(".uk-card-body.sc-js-el-show").velocity("transition.slideUpBigIn",{delay:120,duration:360}),$invoice.find(".uk-card-title.sc-js-el-show").velocity("transition.fadeIn",{duration:360}),scutum.helpers.hiResImagesProcess(),setTimeout(function(){UIkit.update()},300)}).hbRender("invoice",{invoice:i,total:parseFloat(s.toFixed(2))})},1e3))}).catch(function(i){throw console.log("There has been a error: "+i.message),i})})})},!1)},scutum.pages.invoices.print=function(){scutum.require(["printThis"],function(){scutum.$body.on("click",".sc-js-invoice-print",function(i){i.preventDefault(),$(".sc-js-invoice-content").printThis({debug:!0,importStyle:!0,loadCSS:"assets/css/print.css"})})})};