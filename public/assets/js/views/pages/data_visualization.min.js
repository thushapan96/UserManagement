scutum.pages.data_visualization={},scutum.pages.data_visualization.init=function(){scutum.require(["datatables","d3","billboard"],function(){$dt=$("#dataVis-table").DataTable({scrollY:"200px",scrollCollapse:!0,paging:!1});var t,n=scutum.pages.data_visualization.chartInit($dt);scutum.$doc.on("sc-sidebar:toggle",function(){n.flush(!0)}),$dt.on("draw",function(){clearTimeout(t),t=setTimeout(function(){var t=scutum.pages.data_visualization.getTableData($dt),a=["Population (2017)"];t[1].forEach(function(t){a.push(t)});var i=["Density (P/Km2)"];t[2].forEach(function(t){i.push(t)}),n.load({columns:[a,i]}),n.config("axis.x.categories",t[0],!0)},50)})},!1)},scutum.pages.data_visualization.getTableData=function(t){var a=[],i=[],n=[],e=[];return t.rows({search:"applied"}).every(function(){var t=this.data();i.push(t[0]),n.push(parseInt(t[1].replace(/\,/g,""))),e.push(parseInt(t[2].replace(/\,/g,"")))}),a.push(i,n,e),a},scutum.pages.data_visualization.chartInit=function(i){var a=scutum.pages.data_visualization.getTableData(i),n=["Population (2017)"];a[1].forEach(function(t){n.push(t)});var e=["Density (P/Km2)"];return a[2].forEach(function(t){e.push(t)}),bb.generate({data:{columns:[n,e],types:{"Population (2017)":"bar","Density (P/Km2)":"spline"},axes:{"Population (2017)":"y","Density (P/Km2)":"y2"},colors:{"Population (2017)":scutum.helpers.colors.multi[6],"Density (P/Km2)":scutum.helpers.colors.multi[1]}},axis:{x:{type:"category",categories:a[0],tick:{fit:!0,autorotate:!0,rotate:-45,multiline:!1,culling:!1}},y:{label:"Population (2017)",tick:{format:function(t){return t/1e6+" M"}}},y2:{label:"Density (P/KmÂ²)",show:!0,tick:{format:function(t){return t}}}},padding:{bottom:80},tooltip:{format:{title:function(t){return a[0][t]},value:function(t,a,i){return"Population (2017)"===i?Math.round(t/1e6)+"M":t}}},onrendered:function(){var t=i.column(1),a=i.column(2);this.hiddenTargetIds.includes("Population (2017)")?t.visible(!1):t.visible(!0),this.hiddenTargetIds.includes("Density (P/Km2)")?a.visible(!1):a.visible(!0)},render:{lazy:!1},bindto:"#dataVis-chart"})};