var cal,calendars,$calendar=$("#sc-calendar");scutum.plugins.calendar={},scutum.plugins.calendar.init=function(){scutum.require(["tui-snippets","tui-timepicker","tui-datepicker","tui-calendar","handlebars"],function(){tui.usageStatistics=!1,scutum.plugins.calendar.calendars(),scutum.plugins.calendar.instance(),scutum.plugins.calendar.controls(),scutum.plugins.calendar.events(),scutum.plugins.calendar.schedule(),scutum.plugins.calendar.calendarsToggle()},!1)},scutum.plugins.calendar.instance=function(){$calendar.height(scutum.$win.height()-$calendar.position().top-120);var e=tui.Calendar;cal=new e("#sc-calendar",{usageStatistics:!1,defaultView:"month",taskView:!0,scheduleView:!0,calendars:calendars,useCreationPopup:!0,useDetailPopup:!0,template:{monthGridHeader:function(e){return'<span class="tui-full-calendar-weekday-grid-date">'+new Date(e.date).getDate()+"</span>"},milestone:function(e){return'<span class="mdi mdi-flag-outline"></span>'+e.title},task:function(e){return'<span class="mdi mdi-calendar-check"></span>'+e.title},allday:function(e){return scutum.plugins.calendar.helpers.getTimeTemplate(e,!0)},time:function(e){return scutum.plugins.calendar.helpers.getTimeTemplate(e,!1)}},week:{narrowWeekend:!scutum.helpers.mq.mediumMax(),startDayOfWeek:1},month:{narrowWeekend:!scutum.helpers.mq.mediumMax(),startDayOfWeek:1}}),scutum.plugins.calendar.helpers.setRenderRangeText(),cal.setTheme(scutum.plugins.calendar.theme);var a=$(".sc-calendars-list"),e=(scutum.helpers.mq.mediumMax()?$("#sc-calendars-list-template-offcanvas"):$("#sc-calendars-list-template")).html(),e=Handlebars.compile(e)({calendars:calendars});a.html(e),scutum.forms.common.icheck($(".sc-js-calendar-toggle"))},scutum.plugins.calendar.calendars=function(){var e,a=[];function t(e){a.push(e)}(e=new scutum.plugins.calendar.helpers.CalendarInfo).id=String(1),e.name="My Calendar",e.color="#ffffff",e.bgColor="#0288D1",e.dragBgColor="#0288D1",e.borderColor="#0277BD",t(e),(e=new scutum.plugins.calendar.helpers.CalendarInfo).id=String(2),e.name="Company",e.color="#ffffff",e.bgColor="#E53935",e.dragBgColor="#E53935",e.borderColor="#C62828",t(e),(e=new scutum.plugins.calendar.helpers.CalendarInfo).id=String(3),e.name="Family",e.color="#ffffff",e.bgColor="#0097A7",e.dragBgColor="#0097A7",e.borderColor="#00838F",t(e),(e=new scutum.plugins.calendar.helpers.CalendarInfo).id=String(4),e.name="Friends",e.color="#ffffff",e.bgColor="#5E35B1",e.dragBgColor="#5E35B1",e.borderColor="#4527A0",t(e),(e=new scutum.plugins.calendar.helpers.CalendarInfo).id=String(5),e.name="Travel",e.color="#ffffff",e.bgColor="#43A047",e.dragBgColor="#43A047",e.borderColor="#2E7D32",t(e),(e=new scutum.plugins.calendar.helpers.CalendarInfo).id=String(6),e.name="etc",e.color="#ffffff",e.bgColor="#757575",e.dragBgColor="#757575",e.borderColor="#424242",t(e),(e=new scutum.plugins.calendar.helpers.CalendarInfo).id=String(7),e.name="Birthdays",e.color="#222222",e.bgColor="#FDD835",e.dragBgColor="#FDD835",e.borderColor="#F9A825",t(e),(e=new scutum.plugins.calendar.helpers.CalendarInfo).id=String(8),e.name="National Holidays",e.color="#ffffff",e.bgColor="#00897B",e.dragBgColor="#00897B",e.borderColor="#00695C",t(e),calendars=a},scutum.plugins.calendar.calendarsToggle=function(){$(".sc-js-calendar-toggle").on("ifChanged",function(e){var a,t,r,o;t=(a=e).target.value,r=a.target.checked,o=(scutum.helpers.mq.mediumMax()?scutum.$offcanvas:scutum.$pageWrapper).find(".calendars-toggle-all"),e=Array.prototype.slice.call(document.querySelectorAll(".sc-calendars-list .sc-js-calendar-toggle")),a=!0,"all"===t?(calendars.forEach(function(e){e.checked=r}),e.forEach(function(e){e.checked=r,$(e).iCheck("update")})):(scutum.plugins.calendar.helpers.findCalendar(t).checked=r,a=e.every(function(e){return e.checked}),o[0].checked=a,o.iCheck("update")),scutum.plugins.calendar.helpers.refreshScheduleVisibility()})},scutum.plugins.calendar.schedule=function(){cal.createSchedules([{id:"1",calendarId:"1",title:"Book Flight to France",category:"allday",dragBgColor:calendars[0].dragBgColor,start:moment().startOf("month").format("YYYY-MM-DD HH:mm"),end:moment().startOf("month").format("YYYY-MM-DD HH:mm")},{id:"2",calendarId:"2",title:"Staff meeting",category:"time",dragBgColor:calendars[1].dragBgColor,recurrenceRule:!0,raw:{attendees:["Mark","John","Lisa"]},start:moment().startOf("month").add(4,"day").startOf("day").add(10,"hours").format("YYYY-MM-DD HH:mm"),end:moment().startOf("month").add(4,"day").startOf("day").add(11,"hours").format("YYYY-MM-DD HH:mm")},{id:"3",calendarId:"3",title:"Get Dentist appointment for John",category:"time",dragBgColor:calendars[2].dragBgColor,raw:{isImportant:!0},start:moment().startOf("month").add(12,"day").startOf("day").add(13,"hours").format("YYYY-MM-DD HH:mm"),end:moment().startOf("month").add(12,"day").startOf("day").add(13,"hours").format("YYYY-MM-DD HH:mm")},{id:"4",calendarId:"4",title:"Weekend getaway with friends",category:"time",dragBgColor:calendars[3].dragBgColor,location:"Cinque Terre, Italy",start:moment().startOf("month").add(15,"day").format("YYYY-MM-DD HH:mm"),end:moment().startOf("month").add(17,"day").format("YYYY-MM-DD HH:mm")},{id:"5",calendarId:"5",title:"Trip to France",category:"time",dragBgColor:calendars[4].dragBgColor,isReadOnly:!0,start:moment().startOf("month").add(26,"day").format("YYYY-MM-DD HH:mm"),end:moment().startOf("month").add(30,"day").format("YYYY-MM-DD HH:mm")},{id:"6",calendarId:"6",title:"Review insurance services",category:"time",dragBgColor:calendars[5].dragBgColor,isAllDay:!0,isPrivate:!0,start:moment().startOf("month").add(6,"day").format("YYYY-MM-DD"),end:moment().startOf("month").add(7,"day").format("YYYY-MM-DD")},{id:"7",calendarId:"7",title:"Get a present for Dad",category:"allday",dragBgColor:calendars[6].dragBgColor,raw:{icon:"mdi mdi-gift"},start:moment().startOf("month").add(22,"day").format("YYYY-MM-DD HH:mm"),end:moment().startOf("month").add(22,"day").format("YYYY-MM-DD HH:mm")},{id:"8",calendarId:"8",title:"National Hugging Day",category:"allday",dragBgColor:calendars[7].dragBgColor,raw:{icon:"mdi mdi-emoticon-happy"},start:moment().startOf("month").add(19,"day").format("YYYY-MM-DD HH:mm"),end:moment().startOf("month").add(19,"day").format("YYYY-MM-DD HH:mm")},{id:"9",calendarId:"6",title:"Check project status",category:"task",dragBgColor:calendars[5].dragBgColor,dueDate:"morning",start:moment().format("YYYY-MM-DD HH:mm"),end:moment().format("YYYY-MM-DD HH:mm")},{id:"10",calendarId:"2",title:"My project v2.0",category:"milestone",dragBgColor:calendars[1].dragBgColor,start:moment().format("YYYY-MM-DD HH:mm"),end:moment().format("YYYY-MM-DD HH:mm")},{id:"11",calendarId:"2",title:"Company picnic",category:"allday",dragBgColor:calendars[1].dragBgColor,raw:{icon:"mdi mdi-food-fork-drink"},start:moment().startOf("month").add(9,"day").startOf("day").add(8,"hours").format("YYYY-MM-DD HH:mm"),end:moment().startOf("month").add(10,"day").startOf("day").add(20,"hours").format("YYYY-MM-DD HH:mm")}])},scutum.plugins.calendar.controls=function(){$("[data-nav-action]").on("click",function(){switch($(this).attr("data-nav-action")){case"move-prev":cal.prev();break;case"move-next":cal.next();break;case"move-today":cal.today()}scutum.plugins.calendar.helpers.setRenderRangeText()}),$("[data-view-action]").on("click",function(){var e=$(this).attr("data-view-action"),a=cal.getOptions(),t="",r="";switch(e){case"toggle-daily":t="day",r="Day";break;case"toggle-weekly":t="week",r="Week";break;case"toggle-monthly":a.month.visibleWeeksCount=0,t="month",r="Month";break;case"toggle-weeks2":a.month.visibleWeeksCount=2,t="month",r="2 weeks"}cal.setOptions(a,!0),cal.changeView(t,!0),scutum.plugins.calendar.helpers.setRenderRangeText(),scutum.plugins.calendar.helpers.setDropdownTexts($(this),r)}),$("[data-control-action]").on("ifChanged",function(){var e=$(this).attr("data-control-action"),a=cal.getOptions(),t="";switch(e){case"toggle-narrow-weekend":a.month.narrowWeekend=!a.month.narrowWeekend,a.week.narrowWeekend=!a.week.narrowWeekend,t=cal.getViewName();break;case"toggle-workweek":a.month.workweek=!a.month.workweek,a.week.workweek=!a.week.workweek,t=cal.getViewName()}cal.setOptions(a,!0),cal.changeView(t,!0),scutum.plugins.calendar.helpers.setRenderRangeText()}),$("#sc-cal-weekends-narrower").prop("checked",!1).iCheck("update")},scutum.plugins.calendar.theme={"common.border":"1px solid rgba(0,0,0,.12)","common.holiday.color":"#f44336","common.saturday.color":"rgba(0,0,0,.54)","common.dayname.color":"rgba(0,0,0,.87)","common.creationGuide.backgroundColor":"rgba(19, 93, 230, 0.1)","common.creationGuide.border":"1px solid #135de6","month.dayname.height":"32px","month.dayname.borderLeft":"1px solid rgba(0,0,0,.12)","month.dayname.paddingLeft":"8px","month.dayname.paddingRight":"8px","month.dayname.fontWeight":"normal","month.dayname.textAlign":"left","month.schedule.borderRadius":"4px","month.moreView.boxShadow":"none","month.moreView.paddingBottom":"0","month.moreViewTitle.height":"28px","month.moreViewTitle.marginBottom":"0","month.moreViewTitle.backgroundColor":"#f5f5f5","month.moreViewTitle.borderBottom":"1px solid rgba(0,0,0,.12)","month.moreViewTitle.padding":"0 8px","month.moreViewList.padding":"8px","week.dayname.height":"42px","week.dayname.borderTop":"1px solid rgba(0,0,0,.12)","week.dayname.borderBottom":"1px solid rgba(0,0,0,.12)","week.dayname.borderLeft":"1px solid rgba(0,0,0,.12)","week.dayname.paddingLeft":"4px","week.dayname.backgroundColor":"inherit","week.dayname.textAlign":"left","week.pastDay.color":"rgba(0,0,0,.54)","week.vpanelSplitter.border":"1px solid #ddd","week.vpanelSplitter.height":"3px","week.daygrid.borderRight":"1px solid #ddd","week.daygridLeft.width":"80px","week.daygridLeft.backgroundColor":"","week.daygridLeft.paddingRight":"4px","week.daygridLeft.borderRight":"1px solid #ddd","week.today.color":"rgba(0,0,0,.87)","week.today.backgroundColor":"#inherit","week.weekend.backgroundColor":"inherit","week.timegridLeft.width":"80px","week.timegridLeft.backgroundColor":"#fafafa","week.timegridLeft.borderRight":"1px solid #ddd","week.timegridLeft.fontSize":"12px","week.timegridLeftTimezoneLabel.height":"51px","week.timegridLeftAdditionalTimezone.backgroundColor":"#fdfdfd","week.timegridOneHour.height":"48px","week.timegridHalfHour.height":"24px","week.timegridHalfHour.borderBottom":"1px dotted #f9f9f9","week.timegridHorizontalLine.borderBottom":"1px solid #eee","week.timegrid.paddingRight":"10px","week.timegrid.borderRight":"1px solid #ddd","week.timegridSchedule.borderRadius":"0","week.timegridSchedule.paddingLeft":"0","week.currentTime.color":"#135de6","week.currentTime.fontSize":"12px","week.currentTime.fontWeight":"bold","week.pastTime.color":"#999","week.pastTime.fontWeight":"normal","week.futureTime.color":"#333","week.futureTime.fontWeight":"normal","week.currentTimeLinePast.border":"1px solid rgba(19, 93, 230, 0.3)","week.currentTimeLineBullet.backgroundColor":"#135de6","week.currentTimeLineToday.border":"1px solid #135de6","week.currentTimeLineFuture.border":"1px solid #135de6","week.creationGuide.color":"#135de6","week.creationGuide.fontSize":"12px","week.creationGuide.fontWeight":"bold","week.dayGridSchedule.borderRadius":"0","week.dayGridSchedule.height":"22px","week.dayGridSchedule.marginTop":"2px","week.dayGridSchedule.marginLeft":"8px","week.dayGridSchedule.marginRight":"8px"},scutum.plugins.calendar.events=function(){window.clickedSchedule=null,cal.on({clickSchedule:function(e){window.clickedSchedule=e.schedule},clickDayname:function(e){},beforeCreateSchedule:function(e){scutum.plugins.calendar.helpers.saveNewSchedule(e)},beforeUpdateSchedule:function(e){var a,t;window.clickedSchedule?(a=cal.getSchedule(e.schedule.id,window.clickedSchedule.calendarId),(t=scutum.plugins.calendar.helpers.findCalendar(e.schedule.calendarId))&&(a.calendarId=t.id,a.color=t.color,a.bgColor=t.bgColor,a.dragBgColor=t.dragBgColor,a.borderColor=t.borderColor),a.title=e.schedule.title,a.location=e.schedule.location,a.isAllDay=e.schedule.isAllDay,a.state=e.schedule.state,cal.deleteSchedule(e.schedule.id,window.clickedSchedule.calendarId),cal.createSchedules([a]),window.clickedSchedule=null):(e.schedule.start=e.start,e.schedule.end=e.end,cal.updateSchedule(e.schedule.id,e.schedule.calendarId,e.schedule))},beforeDeleteSchedule:function(e){cal.deleteSchedule(e.schedule.id,e.schedule.calendarId)},afterRenderSchedule:function(e){e=e.schedule,cal.getElement(e.id,e.calendarId)},clickTimezonesCollapseBtn:function(e){return e?cal.setTheme({"week.daygridLeft.width":"77px","week.timegridLeft.width":"77px"}):cal.setTheme({"week.daygridLeft.width":"60px","week.timegridLeft.width":"60px"}),!0}})},scutum.plugins.calendar.helpers={findCalendar:function(a){var t;return calendars.forEach(function(e){e.id===a&&(t=e)}),t},saveNewSchedule:function(e){var a=e.calendar||scutum.plugins.calendar.helpers.findCalendar(e.calendarId),e={id:String(scutum.helpers.uniqueID()),title:e.title,isAllDay:e.isAllDay,start:e.start,end:e.end,category:e.isAllDay?"allday":"time",dueDateClass:"",color:a.color,bgColor:a.bgColor,dragBgColor:a.dragBgColor,borderColor:a.borderColor,location:e.location,raw:{class:e.raw.class},state:e.state};a&&(e.calendarId=a.id,e.color=a.color,e.bgColor=a.bgColor,e.borderColor=a.borderColor),cal.createSchedules([e]),scutum.plugins.calendar.helpers.refreshScheduleVisibility()},refreshScheduleVisibility:function(){calendars.forEach(function(e){cal.toggleSchedules(e.id,!e.checked,!1)}),cal.render(!0)},CalendarInfo:function(){this.id=null,this.name=null,this.checked=!0,this.color=null,this.bgColor=null,this.borderColor=null},setRenderRangeText:function(){var e=$("#sc-cal-range-text"),a=cal.getOptions(),t=cal.getViewName(),r=[];"day"===t?r.push(moment(cal.getDate().getTime()).format("MMMM Do YYYY")):"month"===t&&(!a.month.visibleWeeksCount||4<a.month.visibleWeeksCount)?r.push(moment(cal.getDate().getTime()).format("MMMM YYYY")):(r.push(moment(cal.getDateRangeStart().getTime()).format("MMMM Do YYYY")),r.push(" ~ "),r.push(moment(cal.getDateRangeEnd().getTime()).format("MMMM Do YYYY"))),e.html(r.join(""))},setDropdownTexts:function(e,a){console.log(a),$("#sc-js-cal-view-name").text(a),$("[data-view-action]").removeClass("sc-text-semibold"),$(e).addClass("sc-text-semibold")},getTimeTemplate:function(e,a){var t=[],r=moment(e.start.toUTCString());return a||t.push("<strong>"+r.format("HH:mm")+"</strong> "),e.isPrivate?t.push('<span class="mdi mdi-lock-outline"></span>'):(e.isReadOnly&&t.push('<span class="mdi mdi-pencil-lock"></span>'),e.attendees.length&&t.push('<span class="mdi mdi-account-multiple-outline"></span>'),e.location&&t.push('<span class="mdi mdi-map-marker-outline"></span>'),e.hasOwnProperty("raw")&&e.raw&&(e.raw.hasOwnProperty("attendees")&&t.push('<span class="mdi mdi-account-multiple"></span>'),e.raw.hasOwnProperty("isImportant")&&t.push('<span class="mdi mdi-alert-outline"></span>'),e.raw.hasOwnProperty("icon")&&t.push('<span class="'+e.raw.icon+'"></span>'))),t.push(" "+e.title),t.join("")}};